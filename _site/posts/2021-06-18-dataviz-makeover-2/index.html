<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>DataViz Makeover: DataViz Makeover 2</title>

<meta property="description" itemprop="description" content="Interactive visualisation for Singapore&#39;s Merchandise Trade with its Trading Partners, 2011-2020"/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-06-18"/>
<meta property="article:created" itemprop="dateCreated" content="2021-06-18"/>
<meta name="article:author" content="Connie Xia"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="DataViz Makeover: DataViz Makeover 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Interactive visualisation for Singapore&#39;s Merchandise Trade with its Trading Partners, 2011-2020"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="DataViz Makeover"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="DataViz Makeover: DataViz Makeover 2"/>
<meta property="twitter:description" content="Interactive visualisation for Singapore&#39;s Merchandise Trade with its Trading Partners, 2011-2020"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["DataViz Makeover 2"]},{"type":"character","attributes":{},"value":["Interactive visualisation for Singapore's Merchandise Trade with its Trading Partners, 2011-2020"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Connie Xia"]},{"type":"character","attributes":{},"value":["https://example.com/conniexia"]}]}]},{"type":"character","attributes":{},"value":["06-18-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["dataviz-makeover-2_files/anchor-4.2.2/anchor.min.js","dataviz-makeover-2_files/bowser-1.9.3/bowser.min.js","dataviz-makeover-2_files/distill-2.2.21/template.v2.js","dataviz-makeover-2_files/header-attrs-2.6/header-attrs.js","dataviz-makeover-2_files/jquery-1.11.3/jquery.min.js","dataviz-makeover-2_files/popper-2.6.0/popper.min.js","dataviz-makeover-2_files/tippy-6.2.7/tippy-bundle.umd.min.js","dataviz-makeover-2_files/tippy-6.2.7/tippy-light-border.css","dataviz-makeover-2_files/tippy-6.2.7/tippy.css","dataviz-makeover-2_files/tippy-6.2.7/tippy.umd.min.js","dataviz-makeover-2_files/webcomponents-2.0.0/webcomponents.js","img/dataprep1.png","img/dataprep10.png","img/dataprep11.png","img/dataprep12.png","img/dataprep13.png","img/dataprep14.png","img/dataprep15.png","img/dataprep16.png","img/dataprep17.png","img/dataprep18.png","img/dataprep2.png","img/dataprep3.png","img/dataprep4.png","img/dataprep5.png","img/dataprep6.png","img/dataprep7.png","img/dataprep8.png","img/dataprep9.png","img/dataviz1.png","img/dataviz10.png","img/dataviz11.png","img/dataviz12.png","img/dataviz13.png","img/dataviz14.png","img/dataviz15.png","img/dataviz16.png","img/dataviz17.png","img/dataviz18.png","img/dataviz19.png","img/dataviz2.png","img/dataviz20.png","img/dataviz21.png","img/dataviz22.png","img/dataviz23.png","img/dataviz24.png","img/dataviz25.png","img/dataviz26.png","img/dataviz27.png","img/dataviz28.png","img/dataviz29.png","img/dataviz3.png","img/dataviz30.png","img/dataviz31.png","img/dataviz32.png","img/dataviz33.png","img/dataviz34.png","img/dataviz35.png","img/dataviz36.png","img/dataviz37.png","img/dataviz38.png","img/dataviz39.png","img/dataviz4.png","img/dataviz40.png","img/dataviz41.png","img/dataviz42.png","img/dataviz43.png","img/dataviz5.png","img/dataviz6.png","img/dataviz7.png","img/dataviz8.png","img/dataviz9.png","img/new.jpg","img/original.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.6/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"DataViz Makeover 2","description":"Interactive visualisation for Singapore's Merchandise Trade with its Trading Partners, 2011-2020","authors":[{"author":"Connie Xia","authorURL":"https://example.com/conniexia","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-06-18T00:00:00.000+08:00","citationText":"Xia, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">DataViz Makeover</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>DataViz Makeover 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Interactive visualisation for Singapore’s Merchandise Trade with its Trading Partners, 2011-2020</p></p>
</div>

<div class="d-byline">
  Connie Xia <a href="https://example.com/conniexia" class="uri">https://example.com/conniexia</a> 
  
<br/>06-18-2021
</div>

<div class="d-article">
<h1 id="critique-of-original-data-visualisation">1. Critique of Original Data Visualisation</h1>
<p><img src="img/original.jpg" /></p>
<p>The original data visualisation is evaluated for its clarity and aesthetics as follows:</p>
<h2 id="clarity">1.1. Clarity</h2>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 47%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>S/N</th>
<th>Critiques</th>
<th>Suggestions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>Absence of a title</strong> – Without a title, it is difficult for the viewers to understand what exactly the data visualisation is about.</td>
<td>Suggest to include an appropriate title like <em>Merchandise Trade Performance with Singapore’s Trade Partners</em> at the top of the data visualisation.</td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>Axis labels are not clear</strong> - Both axes are labelled from 0 to 80 without specifying the measurement or units of the values. Upon scrutinisation, it is revealed from the call-outs that the values are measured in billions and have a monetary value.</td>
<td>Suggest to add in the units (S$B) in the axis titles or standardise the measurements so that the actual raw values are reflected on the axis labels.</td>
</tr>
<tr class="odd">
<td>3</td>
<td><strong>Net trade values with each trading partner are unclear</strong> - Under the notes, it is revealed that if the value of imports exceed exports, the centre point (white circle) of the bubble will fall in the “Net Importers” section that is shaded blue; and if the value of exports exceed imports, the white circle will fall in the “Net Exporters” section that is shaded green. However, as all the bubbles have full opacity and some bubbles are covered by other bubbles, it is unclear to tell what exactly the trade balance is.</td>
<td>Suggest to use a red-blue diverging colour scheme to reflect the net trade balance: Red to mean trade deficit and Blue to mean trade surplus, so that it would be clearer to determine which trading partners are Singapore’s net importers and exporters respectively.</td>
</tr>
<tr class="even">
<td>4</td>
<td><strong>Lack of direct link between the written observation and the bubble plot</strong> - The observation at the bottom of the visualisation compared Singapore’s trade values with its trading partners across different time periods, which is not explicitly shown in the bubble plot. THe is no time aspect revealed from the bubble plot.</td>
<td>Suggest to include in the time component in the visualisation, making it an interactive one.</td>
</tr>
</tbody>
</table>
<h2 id="aesthetics">1.2. Aesthetics</h2>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 47%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>S/N</th>
<th>Critiques</th>
<th>Suggestions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>Overuse of colours in the data visualisation</strong> – Colours should be used to serve a particular purpose like highlighting a particular meaning in data. Yet in this case, the usage of ten different colours to represent the ten different trading partners adds no meaning to the data visualisation.</td>
<td>It is perhaps more applicable to stick to a diverging colour scheme to show Singapore’s export and import values with each trading partner’s export and import on the bubble plot instead of using a colour to represent each trading partner.</td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>Size of bubbles of bubble plot are too large</strong> - Although bubble size is used to show the total merchandise trade value with the respective trade partnenrs, the bubble sizes seem to be too large, making the entire plot look very cluttered.</td>
<td>Suggest to reduce the size of the bubbles accordingly so as to prevent over-cluttering of the bubble plot.</td>
</tr>
<tr class="odd">
<td>3</td>
<td><strong>Location of the axis titles might be confusing</strong> - Both the y-axis and x-axis titles are located at the bottom and left of origin of the plot respectively, which is an uncommon and confusing way to label the axes titles. Without the colour guide, one may accidentally read the axes the other way round due to the positioning of the axes titles.</td>
<td>Suggest to adopt the default way of labelling the axis title, which is having the y-axis title as a rotated title on the left of the y-axis and the x-axis title below of the x-axis.</td>
</tr>
<tr class="even">
<td>4</td>
<td><strong>Absence of axis markers on the plot</strong> - Tick marks are not present on the bubble plot, making it difficult to figure out the exact positions of the values and determine the corresponding export and import values.</td>
<td>Suggest to add in major tick marks of appropriate darkness since both axes are in continuous scale.</td>
</tr>
</tbody>
</table>
<h1 id="proposed-design">2. Proposed Design</h1>
<p>Based on the critics raised above, an alternative graphical presentation has been sketched out to improve the current design.</p>
<p><img src="img/new.jpg" /></p>
<h2 id="advantages-of-the-proposed-design">2.1. Advantages of the Proposed Design</h2>
<p>The advantages of the proposed design are as follows.</p>
<h3 id="clarity-1">Clarity</h3>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 47%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>S/N</th>
<th>Design</th>
<th>Advantages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>Clear title and subtitles</strong></td>
<td>The title and subtitle gives an overaching theme of what the visualisation is about.</td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>Axis markers are clearly labelled</strong></td>
<td>Axis markers for the bubble plot are denominated in billion dollars for easily understanding of what the axes represents</td>
</tr>
<tr class="odd">
<td>3</td>
<td><strong>Addition of animation and filters for interactivity</strong></td>
<td>Filters and animation are included for Years, Trade Partners and Region/Market in this design to be able to toggle around, customising different views to one’s liking, as well as to avoid the problem of overcrowding.</td>
</tr>
<tr class="even">
<td>4</td>
<td><strong>Tooltips are used to include in added insights</strong></td>
<td>THe usage of tooltips can effectively and directly point out observations. Another bar chart is embedded in the tooltip to showcase the balance of trade with each individual trading partners over the span of 10 years.</td>
</tr>
<tr class="odd">
<td>5</td>
<td><strong>Reference lines are added</strong></td>
<td>The demarcation of reference lines is used to compare the data values displayed on the bubble plot with the calculated average.</td>
</tr>
</tbody>
</table>
<h3 id="aesthestics">Aesthestics</h3>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 47%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>S/N</th>
<th>Design</th>
<th>Advantages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>Effective use of colours</strong></td>
<td>Colours are only used to represent trade surplus and trade deficit, to bring about a cleaner visualisation.</td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>Bubble sizes are adjusted accordingly</strong></td>
<td>Bubble sizes are set in a way that isn’t too large or too small, so that it can be seen clearly, at the same time not overcrowdinb the entire plot.</td>
</tr>
<tr class="odd">
<td>3</td>
<td><strong>Axes titles are positioned clearly </strong></td>
<td>The default settings of the axis label on the side of the y-axis and bottom of the x-axis, makes it easy for the viewers to read and understand as it is the most conventional way of labelling the axes.</td>
</tr>
<tr class="even">
<td>4</td>
<td><strong>Axis markers are added for continuous data</strong></td>
<td>Major tickmarks point to us the exact point on the axis that the axis label defines.</td>
</tr>
</tbody>
</table>
<h1 id="proposed-visualisation">3. Proposed Visualisation</h1>
<p>The alternative static visualisation is created using Tableau Desktop and is uploaded onto Tableau Public <a href="https://public.tableau.com/app/profile/connie.xia/viz/DataVizMakeover2_16241926546890/Dashboard1">here</a>.</p>
<h1 id="step-by-step-guide">4. Step-by-step Guide</h1>
<h2 id="data-used">4.1. Data Used</h2>
<p>Two data sources are used which are available under the sub-section of <a href="https://www.singstat.gov.sg/find-data/search-by-theme/trade-and-investment/merchandise-trade/latest-data">Merchandise Trade by Region/Market</a> on the DOS website. The two datasets are then all downloaded and saved as <em>outputFile.xlsx</em>.</p>
<p>After opening the <em>outputFile</em> in Excel, we can see that there are three sheets: Content, T1 and T2. The <em>Content</em> sheet is basically a content page for the datasets found in the Excel file. T1 shows all <em>Merchandise Imports By Region/Market, Monthly</em> and T2 shows all <em>Merchandise Exports By Region/Market, Monthly</em>.</p>
<h2 id="data-preparation">4.2. Data Preparation</h2>
<p><strong>Step 1</strong>: Import the data in Tableau Desktop by dragging and dropping the <em>outputFile</em> onto the Tableau Start Page.</p>
<p><strong>Step 2</strong>: Check the <em>Use Data Interpreter</em> box to help identify the structure of the data and help in our data cleaning and manipulation.</p>
<p><img src="img/dataprep1.png" /></p>
<p><strong>Step 3</strong>: Drag and drop <em>T1</em> onto the Tableau workspace.</p>
<p>As we have made use of the Data Interpreter to help us understand the data structure, the data will be nicely reflected in a tabular form.</p>
<p><img src="img/dataprep2.png" /></p>
<p><strong>Step 4</strong>: Filter the data by the trading partners to exclude <em>Total Merchandise Imports</em>.</p>
<p>Click on the <em>Add</em> Filter button on the top right of the pane. A new window will pop up and select the <em>Add</em> button. Scroll all the way around and select <em>Variables</em> before clicking <em>OK</em>. Another window will show and make sure all the checkboxes are checked, with the exception of <em>Total Merchandise Imports(Thousand Dollars)</em>.</p>
<p><img src="img/dataprep3.png" /></p>
<p><strong>Step 5</strong>: Rename the <em>Variables</em> header to <em>Trading Partners</em> by double-clicking on the <em>Variables</em> word.</p>
<p><img src="img/dataprep4.png" /></p>
<p><strong>Step 6</strong>: Pivot the table by selecting all the time period columns and right click to choose <em>Pivot</em>.</p>
<p><img src="img/dataprep5.png" /></p>
<p><strong>Step 7</strong>: Rename the <em>Pivot Field Names</em> and <em>Pivot Field Values</em> to <em>Time Period</em> and <em>Import Value</em> respectively.</p>
<p><img src="img/dataprep6.png" /></p>
<p><strong>Step 8</strong>: Change the data type of the <em>Time Period</em> column from <em>string</em> data type to <em>Date</em>.</p>
<p>To do so, click on the icon on the top left of the column header and choose <em>Date</em>.</p>
<p><img src="img/dataprep7.png" /></p>
<p><strong>Step 9</strong>: Filter the data by <em>Time Period</em> to only include in data from January 2011 to December 2020.</p>
<p>Click on the <em>Edit</em> Filter button on the top right of the pane, before adding another filter. Choose <em>Time Period</em> and select <em>Year</em> to pick Years <em>2011 to 2020</em> to keep.</p>
<p><img src="img/dataprep8.png" /></p>
<p><strong>Step 10</strong>: Export the file as a <em>csv</em> file under Data &gt; Export Data as CSV &gt; T1 and save it as Imports_data.csv.</p>
<p><img src="img/dataprep9.png" /></p>
<p><strong>Step 11</strong>: Repeat steps 3 to 10 for T2 and save the file as Exports_data.csv.</p>
<p><strong>Step 12</strong>: In a new Tableau workspace, drag and drop in the <em>Imports_data.csv</em> file.</p>
<p>At the left pane, we can see both the <em>Imports_data.csv</em> and <em>Exports_data.csv</em> files. Drag and drop the <em>Imports_data.csv</em> node into the workspace.</p>
<p><img src="img/dataprep10.png" /></p>
<p><strong>Step 13</strong>: Merge the two <em>Imports_data.csv</em> and <em>Exports_data.csv</em> files.</p>
<p>To do so, double click on the <em>Import_data.csv</em> node in the workspace and drag the <em>Export_data.csv</em> node into the workspace. Then, click on the Venn diagram between the two nodes and make sure the <em>Inner</em> join is selected. Join the two datasets by <em>Time Period</em> and <em>Trading Partners</em> before closing the callout box.</p>
<p><img src="img/dataprep11.png" /></p>
<p><strong>Step 14</strong>: The two duplicated columns: <em>Time Period (Exports data.csv)</em> and <em>Trading Partners (Exports data.csv)</em> can now be hidden.</p>
<p>Select the two columns and click on the small triangle located on the top right of the column header and select <em>Hide</em>.</p>
<p><img src="img/dataprep12.png" /></p>
<p><strong>Step 15</strong>: The <em>Trading Partners</em> column is then split into two new columns showing the <strong>name</strong> of the trading partner and the <strong>units of measurement</strong> for the trade data.</p>
<p>Click on the small triangle located on the top right of the column header again and this time, choose <em>Split</em>.</p>
<p><img src="img/dataprep13.png" /></p>
<p><strong>Step 16</strong>: The new columns <em>Trading Partners - Split 1</em> and <em>Trading Parters - Split 2</em> are then renamed to <em>Trade Partners</em> and <em>Units</em> respectively by double-clicking on the header names and typing in the new header names.</p>
<p><img src="img/dataprep14.png" /></p>
<p><strong>Step 17</strong>: Create a new <em>Calculated Field</em> for the <em>Import Value</em> to scale and synchronise the values accordingly as some values are reflected in <em>millions</em> and others in <em>thousands</em>.</p>
<p>Right click on the <em>Imports Value</em> and select <em>Create Calculated Field</em> and add in the following formula to compute the raw values of the imports. Rename the field as <em>Imports</em>.</p>
<p><img src="img/dataprep15.png" /></p>
<p><strong>Step 18</strong>: Repeat Step 16 to create a new <em>Calculated Field</em> for the <em>Export Value</em> too and rename the field as <em>Exports</em>.</p>
<p><strong>Step 19</strong>: Now, we can hide the <em>Trading Partners</em>, <em>Unit</em>, <em>Export Value</em> and <em>Import Value</em> columns.</p>
<p><img src="img/dataprep16.png" /></p>
<p><strong>Step 20</strong>: Create a new <em>Calculated Field</em> called <em>Trade Balance</em> to derive Singapore’s trade balance with its trading partners with the following formula.</p>
<p><img src="img/dataprep17.png" /></p>
<p><strong>Step 21</strong>: Create a new <em>Calculated Field</em> called <em>Total Trade</em> to derive the total merchandise trade Singapore has with its trading partners with the following formula.</p>
<p><img src="img/dataprep18.png" /></p>
<p>With that, the basic cleaning and data manipulation of Singapore’s merchandise trade dataset is completed and we can now move on to the data visualisation part.</p>
<h2 id="data-visualisation">4.3. Data Visualisation</h2>
<p><strong>Step 1</strong>: Click on the <em>Sheet 1</em> on the bottom of the Tableau Workspace and be directed to the visualisation workspace.</p>
<p><img src="img/dataviz1.png" /></p>
<p><strong>Step 2</strong>: Drag and drop the <em>Exports</em> and <em>Imports</em> nodes into the <em>Columns</em> and <em>Rows</em> respectively, to arrive at the following graph.</p>
<p><img src="img/dataviz2.png" /></p>
<p><strong>Step 3</strong>: Drag and drop the <em>Trade Partners</em> node into the <em>Details</em> box to see the distribution of Singapore’s trading partners in terms of exports and imports.</p>
<p><img src="img/dataviz3.png" /></p>
<p><strong>Step 4</strong>: Drag and drop the <em>Trade Partners</em> node into the <em>Filter</em> pane and click OK.</p>
<p><img src="img/dataviz4.png" /></p>
<p><strong>Step 5</strong>: Click on the small triangle on the side of the <em>Trade Partners</em> to reveal a dropdown box.</p>
<p>Select on <em>Show Filter</em> to make the check box filter appear on the right side of the workspace. Filter the trading partners to only show <strong>European Union</strong>, <strong>Hong Kong</strong>, <strong>Indonesia</strong>, <strong>Japan</strong>, <strong>Mainland China</strong>, <strong>Malaysia</strong>, <strong>Republic Of Korea</strong>, <strong>Taiwan</strong>, <strong>Thailand</strong> and the <strong>United States</strong> to focus on these trading partners first. As this is going to be an interactive visualisation, we can always choose different trading partners from the Filter bar to look at their results.</p>
<p><img src="img/dataviz5.png" /></p>
<p><strong>Step 6</strong>: Drag and drop the <em>Total Trade</em> node into the <em>Size</em> box, so that the size of the circles reflect the total merchandise trade Singapore has with its respective trading partners.</p>
<p>Click on the <em>Size</em> box to adjust the size of the circles accordingly by dragging the slider.</p>
<p><img src="img/dataviz6.png" /></p>
<p><strong>Step 7</strong>: Change the graph type from <em>Automatic</em> to <em>Circle</em> to show a bubble plot with shaded bubbles.</p>
<p><img src="img/dataviz7.png" /></p>
<p><strong>Step 8</strong>: Drag and drop the <em>Trade Balance</em> node to the <em>Color</em> box to show the net trade with each trading partner.</p>
<p>Click on the <em>Color</em> box and choose a light grey border for the bubbles under Effects &gt; Border. Under <em>Edit Colors</em>, select the <em>Red-Blue Diverging</em> colour palette in the drop down box. Check <em>Use Full Color Range</em>. Under <em>Advanced</em> settings, make sure that the <em>Center</em> check box is ticked and the center is set at 0. Apply the settings and click OK.</p>
<p><img src="img/dataviz8.png" /></p>
<p><strong>Step 9</strong>: Drag and drop the <em>Trade Partners</em> node to the <em>Label</em> box, so that the names of the trade partners will be shown on the bubble plot for easy reference.</p>
<p><img src="img/dataviz9.png" /></p>
<p><strong>Step 10</strong>: Add in axis lines and tick marks.</p>
<p>Right click on the x-axis and select <em>Format</em>. The <em>Format</em> pane will appear on the left of the workspace. Under the <em>Axis</em> pane and <em>Scale</em> tab, select the drop down box at <em>Numbers</em> and choose <em>Currency (Custom)</em>. Make the decimal places = 0 and display units as Billions (B). Do the exact same for the y-axis as well.</p>
<p>Click on the <em>Lines</em> tab at the top of the Format pane to be directed to the <em>Format Lines</em> pane. At the <em>Sheet</em> tab, add in light grey markers for the <em>Axis Rulers</em> and the <em>Axis Ticks</em>.</p>
<p><img src="img/dataviz10.png" /></p>
<p><strong>Step 11</strong>: Add in references lines on both the y-axis and x-axis to reflect the average imports and exports values.</p>
<p>Right click on the x-axis and select <em>Add Reference Line</em>. A pop up will appear and select <em>Average</em> in the drop down box and <em>Custom</em> as the label. Type in “Avg exports =” before pressing on the arrow button at the side to choose <em>Value</em>.</p>
<p>Under the <em>Formatting</em> section, click on the drop down box for <em>Line</em>. Choose the first <em>Dotted Line</em> and select the line thickness to be the thinnest. Use a light grey colour for the line.</p>
<p>Repeat the same to add in a reference line on the y-axis as well to show the average imports.</p>
<p><img src="img/dataviz11.png" /></p>
<p><strong>Step 12</strong>: Create a new <em>Calculated Field</em> to add in a <em>Ranking by Net Exports</em>.</p>
<p>Right click on the left pane and select <em>Create Calculated Field</em>. Type in the following formula to rank the trading partners by their <em>Net Exports</em> to Singapore.</p>
<p><img src="img/dataviz12.png" /></p>
<p><strong>Step 13</strong>: Similarly, create another new <em>Calculated Field</em> to add in a <em>Ranking by Net Imports</em>.</p>
<p>Right click on the left pane and select <em>Create Calculated Field</em>. This time, type in the similar formula as above but change ‘desc’ to ‘asc’ instead, to rank the trading partners by their <em>Net Imports</em> to Singapore.</p>
<p><img src="img/dataviz13.png" /></p>
<p><strong>Step 14</strong>: Drag and drop both <em>Ranking by Net Exports</em> and <em>Ranking by Net Imports</em> into the <em>Tooltip</em> box.</p>
<p><img src="img/dataviz14.png" /></p>
<p><strong>Step 15</strong>: Next, click on the small triangle on the corner of the <em>Ranking by Exports</em> icon and select <em>Compute Using</em> &gt; <em>Trade Partners</em> to be rank the export values by the trading partners.</p>
<p>Do the same for the <em>Ranking by Imports</em> to sort the ranking by trading partners.</p>
<p><img src="img/dataviz17.png" /></p>
<p><strong>Step 16</strong>: Now, when we mouse over the bubbles, we can see a call out box showing the <em>Trade Partner</em>, <em>Imports</em>, <em>Exports</em>, <em>Trade Balance</em>, <em>Total Trade</em> and both <em>net imports’ and exports’ rankings</em>. We can see that the values for the <em>Trade Balance</em> and <em>Total Trade</em> are in their raw forms. So, it would be wise to standardised them to reflect their values in billions.</p>
<p><img src="img/dataviz15.png" /></p>
<p><strong>Step 17</strong>: In order to do so, click on the small triangle on the corner of the <em>SUM(Trade Balance)</em> icon and select <em>Format</em>. The <em>Format</em> pane will appear on the left. At the <em>Pane</em> tab, under the <em>Default</em> section, choose <em>Currency (Custom)</em> under the <em>Numbers</em> drop down box, and set the decimal places to 2 and display units as Billions (B).</p>
<p><img src="img/dataviz16.png" /></p>
<p><strong>Step 18</strong>: Do the same to adjust for the Total Trade, at the <em>SUM(Total Trade)</em> icon.</p>
<p><strong>Step 19</strong>: Add two new <em>Calculated Fields</em> called <em>Net Exports</em> and <em>Net Imports</em> to pull out Singapore’s trade surplus and trade deficit respectively, with its trading partners.</p>
<p>Right click to add a <em>Calculated Field</em> and type in the following formulas.</p>
<p><img src="img/dataviz18.png" /></p>
<p><strong>Step 20</strong>: Drag and drop the <em>Net Exports</em> and <em>Net Imports</em> nodes into the <em>Tooltip</em> box.</p>
<p>Scale the numbers to reflect the trade values in Billions. Click on the small triangle at the corner of the <em>AGG(Net Imports)</em> and <em>AGG(Net Exports)</em> icons and select <em>Format</em>. Under the <em>Pane</em> tab, adjust the numbers such that their decimal places are 2 and display units are in Billions (B).</p>
<p><img src="img/dataviz19.png" /></p>
<p><strong>Step 21</strong>: Once that is done, we can now rewrite the message to be shown in the Tooltip. Click on the <em>Tooltip</em> button and recraft the wordings as follows.</p>
<p><img src="img/dataviz20.png" /></p>
<p><strong>Step 22</strong>: Drag and drop the <em>Time Period</em> node into the <em>Filter</em> box. Select <em>Years</em> in the new pop up window and click <em>Next</em>. Click OK.</p>
<p><img src="img/dataviz21.png" /></p>
<p><strong>Step 23</strong>: Click on the small triangle at the <em>YEAR(Time Period)</em> node and select <em>Show Filter</em>.</p>
<p><img src="img/dataviz22.png" /></p>
<p><strong>Step 24</strong>: At the <em>YEAR(Time Period)</em> pane located at the right of the workspace, click on the small triangle and from the drop down list, choose <em>Single Value (list)</em> to activate the radio button option to choose from the Year list.</p>
<p><img src="img/dataviz23.png" /></p>
<p><strong>Step 25</strong>: Next, ensure that the <em>Show “All” Value</em> option is unchecked.</p>
<p>To do so, click on the small triangle at the <em>YEAR(Time Period)</em> pane again. Under <em>Customise</em>, uncheck the <em>Show “All” Value</em> option.</p>
<p><img src="img/dataviz24.png" /></p>
<p><strong>Step 26</strong>: Now, in a new Sheet, drag and drop <em>Time Period</em> and <em>Trade Balance</em> into the <em>Columns</em> and <em>Rows</em>, respectively.</p>
<p><img src="img/dataviz25.png" /></p>
<p><strong>Step 27</strong>: Change the graph type from <em>Automatic</em> to <em>Bar</em>.</p>
<p><img src="img/dataviz26.png" /></p>
<p><strong>Step 28</strong>: Increase the <em>Size</em> of the bars by dragging the scroll to the right, so as to reduce the gaps between each individual bars.</p>
<p><img src="img/dataviz27.png" /></p>
<p><strong>Step 29</strong>: At the top of the bar chart, right click on the <em>Time Period</em> header and select <em>Hide Field Labels for Columns</em>.</p>
<p>It is self-explanatory that the categorical variables are in time format, so it is not necessary to include a similar header too.</p>
<p><img src="img/dataviz29.png" /></p>
<p><strong>Step 30</strong>: Drag and drop <em>Trade Balance</em> node into the <em>Color</em> box and <em>Edit Colors</em> by clicking on the small triangle of the <em>SUM(Trade Balance)</em> pane, located at the right hand side. Choose a <em>Red-Blue Diverging</em> colour palette with 2 stepped colours. Under <em>Advanced</em> settings, ensure that the Center is set at 0.</p>
<p><img src="img/dataviz30.png" /></p>
<p><strong>Step 31</strong>: Rename <em>Sheet 2</em> to <em>Annual Trade Balance</em> by double-clicking on the title.</p>
<p><img src="img/dataviz28.png" /></p>
<p><strong>Step 32</strong>: Adjust the axes accordingly by adding in the monetary units of measurement, tick marks and axis line to the y-axis, and the axis line to the x-axis, under the <em>Format</em> pane.</p>
<p>Right click on the y-axis and select <em>Format</em>. Under the <em>Format</em> pane on the left, choose the <em>Currency (Custom)</em> option under the <em>Axis</em> section and set the decimal places and display units accordingly.</p>
<p>Click on the <em>Lines</em> button to add in <em>Axis Rulers</em> and <em>Axis Ticks</em>, and choose a grey colour to show on the bar chart.</p>
<p><img src="img/dataviz31.png" /></p>
<p><strong>Step 33</strong>: Resize the bar chart to small as possible as we want to embed this bar chart into the tooltip of our previous visualisation.</p>
<p><img src="img/dataviz32.png" /></p>
<p><strong>Step 34</strong>: Rename both <em>Sheet 1</em> and <em>Sheet 2</em> to <em>Merchandise Trade Performance</em> and <em>Annual Trade Balance</em> respectively.</p>
<p><strong>Step 35</strong>: Now, we can go back to <em>Sheet 1</em> and add in the bar chart to its <em>ToolTip</em>. Click onto the <em>Tooltip</em> and select <em>Insert</em> &gt; <em>Sheets</em> &gt; <em>Annual Trade Balance</em> to add in the diagram to the bottom of the <em>Tooltip</em>.</p>
<p><img src="img/dataviz33.png" /></p>
<p><strong>Step 36</strong>: Mousing over the bubbles will show the <em>Annual Trade Balance</em> graph in the tooltip, but the graph is cut. In order to show the entire graph, click on the <em>Tooltip</em> button and change the <em>maxwidth</em> from 300 to 500.</p>
<p><img src="img/dataviz34.png" /></p>
<p><strong>Step 37</strong>: Change the title to <em>Singapore’s Trade Performance with its Trading Partners</em>.</p>
<p>In order to add in an interactive year that changes when different years are picked, click on the <em>Insert</em> button and choose <em>YEAR(Time Period)</em> to activate the interactivity.</p>
<p><img src="img/dataviz35.png" /></p>
<p><strong>Step 38</strong>: Add a new <em>Dashboard</em> and drag and drop the <em>Merchandise Trade Performance</em> sheet into the workspace.</p>
<p><img src="img/dataviz36.png" /></p>
<p><strong>Step 39</strong>: Under the <em>Size</em> section, change from <em>Fixed size</em> to <em>Automatic</em>, so that the dashboard will automatically adjust itself on different viewing platforms.</p>
<p><img src="img/dataviz37.png" /></p>
<p><strong>Step 40</strong>: Remove the <em>Total Trade</em> section from the dashboard.</p>
<p><img src="img/dataviz38.png" /></p>
<p><strong>Step 41</strong>: Change the title of the <em>Year of Time Period</em> to <em>Year</em> by right clicking on the title of the <em>Year of Time Period</em> pane and selecting <em>Edit Title</em>.</p>
<p><img src="img/dataviz39.png" /></p>
<p><strong>Step 42</strong>: Add in animation to smoothen the transition, while toggling between different years.</p>
<p><img src="img/dataviz40.png" /></p>
<p><strong>Step 43</strong>: Looking at the data visualisation, it seemed that both the regions and markets are combined in the same bubble plot, making analysis of the visualisation tedious. We can go back to the <em>Data Source</em> tab and add in a new <em>Calculated Field</em> as follows. As the Singapore’s trade values with the different regions are denominated in millions and the country’s trade values with different markets are denominated in thousands, we can separate the trading partners in regions and markets easily, with the following formula:</p>
<p><img src="img/dataviz41.png" /></p>
<p><strong>Step 44</strong>: Now, go to the <em>Merchandise Trade Performance</em> sheet and add in a new filter. Drag the <em>Region/Market</em> node into the <em>Filter</em> section and show the filter on the right hand of the workspace. Edit the check boxes to radio buttons instead so as to individually toggle between All, Region and Market.</p>
<p><img src="img/dataviz42.png" /></p>
<p><strong>Step 45</strong>: The static version of the visualisation would look something like this after captions regarding the observations are added. The interactive visualisation is on <a href="https://public.tableau.com/app/profile/connie.xia/viz/DataVizMakeover2_16241926546890/Dashboard1">Tableau Public</a>.</p>
<p><img src="img/dataviz43.png" /></p>
<h1 id="major-observations-derived">5. Major Observations Derived</h1>
<p>The major observations derived from new data visualisation are as follows:</p>
<ol type="1">
<li><p>Looking at Singapore’s merchandise trade by markets, we can observe that Hong Kong is Singapore’s top net exporter since 2011 and the United States was Singapore’s top net importer before it was overtaken by Taiwan from 2018 onwards. However, when we examine Singapore’s merchandise trade by region, Asia and Europe has been successful in being Singapore’s top net exporter and importer for the past 10 years.</p></li>
<li><p>The top 10 trading partners of Singapore (in terms of total trade value) are Mainland China, Malaysia, United States, Hong Kong, Taiwan, Japan, Republic of Korea, Indonesia and Thailand, in no particular order. It is interesting to note that Singapore has been in constant trade deficit with Taiwan and Japan over the past 10 years and constant trade surplus with Mainland China, Hong Kong, Indonesia and Thailand. Singapore starts to be in trade deficit with Malaysia since 2019, previously being a net exporter to Malaysia. The country also became in trade surplus with both Republic of Korea and the United States in 2017 and 2020, respectively.</p></li>
<li><p>Both average exports and imports out of and into Singapore dropped by approximately 2.75% and 5.85% respectively from 2019 to 2020. This could be due to the COVID-19 pandemic which originated in Wuhan, China in December 2019 and has been on-going. Measures to contain and curb the spread of the virus undoubtedly affecting trade, as shown from the decreased trade value over the year.</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
